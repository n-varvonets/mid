
# Микросервисы, распределённый монолит и принцип "душения"

## Микросервисы и Монолит

### Что такое микросервисы?

**Микросервисы** — это архитектурный стиль, при котором приложение делится на небольшие, независимые сервисы, каждый из которых отвечает за одну конкретную задачу или бизнес-функцию. Эти сервисы взаимодействуют друг с другом через хорошо определённые интерфейсы (обычно через HTTP или сообщения). Каждый микросервис разрабатывается, развёртывается и масштабируется отдельно.

#### Преимущества микросервисов:
1. **Масштабируемость**: Можно масштабировать только те сервисы, которые требуют дополнительных ресурсов, не затрагивая другие части системы.
2. **Независимая разработка**: Команды могут работать над разными микросервисами независимо друг от друга, что ускоряет разработку.
3. **Устойчивость к сбоям**: Если один микросервис выходит из строя, это не обязательно влияет на работу всей системы.
4. **Гибкость в технологиях**: Для каждого микросервиса можно выбрать наиболее подходящую технологию и язык программирования.

#### Недостатки микросервисов:
1. **Сложность управления**: Большое количество микросервисов может усложнить управление системой, мониторинг и отладку.
2. **Межсервисная коммуникация**: Требуется дополнительная инфраструктура для обеспечения надежного взаимодействия между сервисами.
3. **Повышенная сложность развёртывания**: Нужно тщательно координировать развёртывание микросервисов, особенно если они зависят друг от друга.

### Что такое распределённый монолит?

**Распределённый монолит** — это архитектура, при которой система внешне выглядит как микросервисная, но компоненты системы используют общую базу данных или имеют тесную связанность. Это ограничивает гибкость системы и масштабируемость.

#### Преимущества распределённого монолита:
1. **Проще управление данными**: Сервисам не нужно управлять разными базами данных, так как всё хранится в одном месте.
2. **Целостность данных**: Все компоненты могут легко работать с общей базой данных, что упрощает поддержание целостности.

#### Недостатки распределённого монолита:
1. **Высокая связанность**: Компоненты зависят от общей базы данных и не могут работать независимо друг от друга.
2. **Ограниченная масштабируемость**: Если одна часть системы нуждается в масштабировании, это может затронуть всю систему, так как компоненты зависят от общих ресурсов.

### Обработка БД

- **Микросервисы**: Каждый микросервис имеет свою собственную базу данных, что позволяет децентрализовать хранение данных. Но поддержание целостности данных между сервисами становится сложнее.
- **Распределённый монолит**: Все компоненты используют одну и ту же базу данных, что упрощает поддержание целостности данных, но создаёт зависимость между компонентами.

## Принцип "душения" (Strangling Monolith)

Принцип душения — это техника миграции от монолитной архитектуры к микросервисной. Вместо полной переписывания системы, старая часть монолита постепенно "душится", а новые функции переносятся в микросервисы.

### Этапы применения:
1. **Вынос новых функций**: Новые функции разрабатываются как микросервисы, взаимодействующие с монолитом.
2. **Постепенное отключение монолита**: Как только микросервис стабилен, старая часть монолита, отвечающая за эти функции, "выключается".
3. **Полная миграция**: Со временем вся система становится микросервисной, и монолит "задушен".

Этот подход минимизирует риски, связанные с полной миграцией, и позволяет постепенно обновлять систему.

## Заключение

- **Микросервисы** лучше подходят для сложных и масштабируемых систем, где требуется гибкость и независимость компонентов.
- **Распределённый монолит** сохраняет зависимость компонентов и данных, что ограничивает масштабируемость.
- **Принцип душения** помогает постепенно перейти от монолита к микросервисам, минимизируя риски.
